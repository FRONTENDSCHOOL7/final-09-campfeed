## **🏕 CAMPICK**

---

배포 URL : https://campick9.netlify.app/

## 테스트 계정

- ID : campick09@naver.com
- PW : 123123




- 
## 1. 프로젝트 소개

![그림1](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/89963228/3ffc3a49-eb1a-4ab4-8d15-0efa11321264)

CAMPICK은 자신이 다녀왔던 캠핑장에 대한 정보와 후기를 남겨 서로 공유하고 자신의 캠핑 상품을 등록하고 예약할 수 있는 SNS플랫폼입니다.
사용자는 분위기 특색을 담아 상품을 등록할 수 있으며 분위기 맞는 캠핑장을 골라 예약할 수 있습니다. 


## 2. 팀원 소개



박재웅 9조 프로젝트팀을 소개합니다!

안녕하세요. 저희는 4명의 Front-end 개발자로 구성된 박재웅 9조 프로젝트팀입니다.

<div align="center">

|                                                                                          |                                                                                          |                                                                                          |                                                                                       |
| :--------------------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------: |
| <img src="https://avatars.githubusercontent.com/u/127311862?v=4" width="120px;" alt=""/> | <img src="https://avatars.githubusercontent.com/u/122030243?v=4" width="120px;" alt=""/> | <img src="https://avatars.githubusercontent.com/u/138555977?v=4" width="120px;" alt=""/> | <img src="https://avatars.githubusercontent.com/u/89963228?v=4" width="120" alt="" /> |
|                          [김건희](https://github.com/gunhee98)                           |                         [박재웅](https://github.com/donguramee)                          |                         [장소진](https://github.com/sojinkorea)                          |                        [조효은](https://github.com/chohe3212)                         |

</div>

## 3. 기술 및 개발 환경
 <div align="center">

| FrontEnd | BackEnd | Design | 협업방식 | 컨벤션 |
| :----: | :----: | :----: | :----: | :----: |
| <img src="https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=React&logoColor=black"> <img src="https://img.shields.io/badge/styledcomponents-CC6699?style=flat-square&logo=styledcomponents&logoColor=white">   <img src="https://img.shields.io/badge/JavaScript-F7DF1E.svg?style=flat-square&logo=JavaScript&logoColor=black"> <img src="https://img.shields.io/badge/html5-E34F26?style=flat-square&logo=html5&logoColor=white"> | 제공된 API | <img src="https://img.shields.io/badge/figma-FBCEB1?style=flat-square&logo=figma&logoColor=white"> | <img src="https://img.shields.io/badge/Git-F05032?style=flat-square&logo=Git&logoColor=white"> <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"> <img src="https://img.shields.io/badge/Notion-000000.svg?style=flat-square&logo=Notion&logoColor=white"> <img src="https://img.shields.io/badge/Discord-5865F2?style=flat-square&logo=Discord&logoColor=white"> | <img src="https://img.shields.io/badge/Prettier-F7B93E.svg?style=flat-square&logo=Prettier&logoColor=black"> <img src="https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white"> | 

</div>

### 기술적 의사결정
|기술|사용 이유|
|------|---|
|React|-HTML과 유사한 문법을 사용하여 컴포넌트의 구조를 보다 직관적으로 파악할 수 있고, 개발자 경험을 향상시킵니다.<br> -컴포넌트 기반으로 UI를 구성하여 재사용성을 높이고 유지보수에 용이합니다.<br>-다양한 라이브러리와 도구들이 개발되어 있어서 확장성이 띄어나 생산성을 높일수 있습니다.|
|Styled-Components|-자바스크립트를 통한 동적스타일링이 가능하여 상황맞는 css스타일을 유연하게 처리할 수 있습니다.<br>-각각 컴포넌트의 내에서만 스타일이 적용되어 전역 스타일 충돌을 방지하여 유지보수에 용이합니.|

## 4. 프로젝트 일정

| 주차                       |                                                                                                                                                              |
| :--------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **1주차**<br>(10/13 ~ 10/19)   | - 주제 선정, 기술 스택 및 협업툴 결정 (`Notion`, `Discord`, `Figma`, `Figjam`)<br>- GitProject, GitIssue 템플릿 적용, Figma 디자인 작업 및 기획, 컨벤션 설정 |
| **2주차**<br>(10/20 ~ 10/24 )  | - 초기 개발환경 세팅<br>- 공통 컴포넌트 분석 및 작업,API분석                                                                  |
| **3주차**<br>(10/25 ~ 11/1) | - 페이지별 필수 기능 구현                                                                                                                    |
| **4주차**<br>(11/1 ~ 11/8) | - 필수 기능 구현 1차 완료 및 디자인 수정<br>- 추가기능 구현 (좋아요, 이미지 여러장 업로드,댓글 등) <br>- 배포<br>- 프로젝트를 시연해보며 보이는 에러 수정<br>- README 작성                  |

- ## Calendar
  
  <img width="842" alt="개발 일정" src="https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/3076870b-6a8c-44d5-817e-0401e4649d6f">
## 5. 폴더 구조



```
🏠 campic
├─ .github
│  ├─ ISSUE_TEMPLATE  ─────────────── 📜 이슈 템플릿
│  └─ PULL_REQUEST_TEMPLATE.md ────── 📜 PR 템플릿
│─ .gitignore
│─ .prettierrc   ──────────────────── ⚙️ prettier 설정 파일
├─ public
│  ├─ favicon.ico
│  └─ index.html
└─ 📂 src
  ├─ 📂 api     ───────────────────── 📲 Api 함수
  ├─ 📂 assets  ───────────────────── 🧸 아이콘,이미지 소스
  ├─ 📂 components
  │  ├─ 📂 campsiteFeed ───────────── 📦 홈피드,예약페이지,프로필페이지에서 사용되 상품 컴포넌트
  │  ├─ 📂 comment ────────────────── 📦 댓글 페이지에 사용되는 컴포넌트
  │  ├─ 📂 community  ─────────────── 📦 커뮤니티 페이지에사용되는 컴포넌트
  │  ├─ 📂 follow   ───────────────── 📦 팔로잉,팔로워 페이지에 사용되는 컴포넌트
  │  ├─ 📂 form   ─────────────────── 📦 로그인, 회원가입에 사용되는 공통 컴포넌트 
  │  ├─ 📂 header   ───────────────── 📦 페이지마다 상단에 사용되는 헤더 컴포넌트
  │  ├─ 📂 kakaomap   ─────────────── 📦 상품,게시물 등록에 사용되는 컴포넌트
  │  ├─ 📂 login   ────────────────── 📦 첫 화면에 사용되는 컴포넌트
  │  ├─ 📂 modal   ────────────────── 📦 모달에 사용되는 컴포넌트
  │  ├─ 📂 navbar   ───────────────── 📦 페이지 하단 사용되는 컴포넌트
  │  ├─ 📂 post   ─────────────────── 📦 홈피드,커뮤니티,프로필에 사용되는 게시물 관련 컴포넌트
  │  ├─ 📂 slider   ───────────────── 📦 슬라이더 기능 컴포넌트
  │  ├─ 📂 toast   ────────────────── 📦 알림창 관련 컴포넌트
  │  └─ 📂 userProfile   ──────────── 📦 프로필 페이지에 사용되는 컴포넌트
  ├─ 📂 hooks ─────────────────────── ♻️ 커스텀 훅 폴더
  │  └─ useImagesUpload.js
  ├─ App.js
  ├─ index.js
  ├─ 📂 pages   ───────────────────── 📲 라우팅이 적용될 주요 page 컴포넌트
  ├─ 📂 styles   ──────────────────── 💄 전역으로 적용할 css 파일들이 포함된 폴더
  │  ├─ Wrapper.jsx
  │  └─ GlobalStyle.js  
  └─ 📂 routes    ─────────────────── 🧸 
    
```

## 6. 역할 분담

![역할분담](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/3af01238-4a5a-45b0-842d-ba5d3197ebbe)


## 7. 기능 UI



<img width="5151" alt="기능 순서도" src="https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/422fef1a-cc8e-409d-b732-b6f87a8f6736">

### 1) 홈
| 시작 화면 | 회원가입 페이지 | 프로필 설정 페이지 |
|-------|-------|-------|
| ![1.시작 화면](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/e9c963b5-4199-45c1-b372-dba50f5c8100) | ![2.회원가입 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/91ff3a81-31b9-4cda-8736-36d2bfc4c7a6) | ![3.회원가입 프로필 설정 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/7c0b478d-e360-4281-a531-1ccbad995675) |

| 로그인 페이지 | 홈 화면 | 검색 페이지 |
|-------|-------|-------|
| ![4.로그인 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/6ba2bb7c-1c30-47c6-bd83-80d9f6aec49e) | ![5.홈화면 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/e5801107-7698-4524-8563-3e7add7bf6b8) | ![6.검색페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/cfc14ccf-6e4a-40a8-8123-356a503173b6) |

### 2) 예약
| 예약 페이지 | 예약 상세보기 페이지 | 예약 채팅 페이지 |
|-------|-------|-------|
| ![7.예약 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/355510f5-b52f-4ca0-a9f3-67b5d20505b5) | ![8.예약 상세보기 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/6dac7421-fa45-4930-bd69-9499f14eef29) | ![9.예약 채팅 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/df36c172-12e0-4697-8eb9-8e83f4fddc58) |

### 3) 커뮤니티
| 커뮤니티 페이지 | 댓글 및 좋아요 기능 | 게시물 작성 페이지 |
|-------|-------|-------|
| ![10.커뮤니티 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/8bb318a9-771d-4adf-982f-4b537457ce1b) | ![11.커뮤니티 댓글 및 좋아요 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/cf7ae2f2-ac90-4667-9dba-65144927be6d) | ![12.커뮤니티 게시글 작성 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/0b584fac-538f-4146-8d1a-15558992d3c4) |

### 4) 프로필
| 프로필 페이지 | 프로필 수정 페이지 | 게시물 삭제 기능 |
|-------|-------|-------|
| ![13.내 프로필 및 팔로잉 팔로워 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/16c02aa7-c292-4ea3-aec0-323446f0cffa) | ![14.내 프로필 수정 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/cf8c1110-830f-4732-a65a-fdc57e34b01c) | ![15.내 프로필 게시물 삭제 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/f1c5bffa-121a-4e60-83cc-f0ec88a0dfd9) |

| 캠핑장 등록 페이지 | 로그아웃 기능 | 404 페이지 |
|-------|-------|-------|
| ![16.내 프로필 캠핑장 등록 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/e2d76244-cd3c-40cb-89e7-ee3d6b0481a2) | ![17.로그아웃 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/2c21270e-d158-4f74-9feb-fbd36fe70ad6) | ![18.404 페이지](https://github.com/FRONTENDSCHOOL7/final-09-campick/assets/138555977/80518390-856b-402b-8efc-af51c7fd31d3) |

## 8. 트러블 슈팅
<details>
	<summary><b>비동기 함수 반복문</b></summary>
문제점: 팔로우한 유저의 상품들의 데이터를 가져올 수 있는 api가 제공되지 않음

 ```jsx
useEffect(() => {
    const accountname = localStorage.getItem("accountname");
    async function getFollowingList() {
      const list = await followList(accountname, "following");
      setFollowingList(list);
      setIsLoading(false);
    }

    getFollowingList();
  }, []);
```

```jsx
useEffect(() => {
    async function getProduct() {
      let arr = [];
      if (followingList.length > 0) {
        await Promise.all(
          followingList.map(async item => {
            const products = await productList(item.accountname, 5);
            arr.push(...products);
          }),
        );
        arr.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
        setProductInfo(arr);
      }
    }
    getProduct();
  }, [followingList]);
```
**해결 방법**: <br>1.팔로잉 리스트를 가져올 수 있는 api를 써서 followingList(state)에 저장 <br>2.팔로잉 리스트가 state에 담기면 followingList에 map를 사용해 유저의 상품리스트를 가져올 수 있는 api를 사용하여 productList(state)에 각 유저의 상품리스트를 저장한다. 이 때 map메서드의 콜백함수가 비동기 처리를 기다려주지 않아 Promise.all를 사용하여 해결
</details>

<details>
	<summary><b>이미지 여러장 업로드</b></summary>
문제점: 이미지 업로드 api에서 10MB이상은 업로드 할 수 없어 3장업로드가 안되는 현상이 발생함

 ```jsx
const useImagesUpload = () => {
  const [images, setImages] = useState([]);

  const onUpload = async (files, length, setShowWrongExtensionToast) => {
    if (images.length + length > 3)
      return alert("이미지는 최대 3개까지 업로드 할 수 있습니다.");
    const options = {
      maxSizeMB: 1,
      maxWidthOrHeight: 1920,
    };

    const formData = new FormData();
    await Promise.all(
      Array.from(files).map(async file => {
        const fileExtension = file.name.split(".").pop().toLowerCase();
        if (
          ALLOWED_EXTENSIONS.includes(`.${fileExtension}`) &&
          file.size <= MAX_SIZE
        ) {
          try {
            const compressedImageFile = await imageCompression(file, options);
            const fromBlobToFile = new File(
              [compressedImageFile],
              "image.jpeg",
            );
            formData.append("image", fromBlobToFile);
          } catch (error) {
            console.error(error);
          }
        } else {
          setShowWrongExtensionToast(true);
          setTimeout(() => {
            setShowWrongExtensionToast(false);
          }, 1000);
        }
      }),
    );

    try {
      const data = await uploadImages(formData);
      const filenames = data.map(data => data.filename);
      setImages(prev => [...prev, ...filenames]);
    } catch (error) {
      console.error(error.message);
    }
  };
```


**해결 방법**: <br>1.imageCompression를 통해 압축을 통해 해결.이미지 최적화하여 성능을 향상시켜 사용자 경험을 향상시키는 결과를 얻음
</details>

<details>
	<summary><b>팔로우,언팔로우 버튼클릭시 발생하는 버그</b></summary>
문제점: 팔로우,언팔로우 버튼 여러번 클릭시 비동기 작업이 여러번 호출되어 팔로우,언팔로우 행위가 여러번 동작하는 버그가 발

 ```jsx
const handlefollowBtn = async () => {
    if (userData.isfollow) {
      await unfollow(userData.accountname);

      setUserData(pre => {
        return {
          ...pre,
          isfollow: !pre.isfollow,
          followerCount: pre.followerCount - 1,
        };
      });
    } else {
      await follow(userData.accountname);

      setUserData(pre => {
        return {
          ...pre,
          isfollow: !pre.isfollow,
          followerCount: pre.followerCount + 1,
        };
      });
    }
  };
  function debounce(func, delay) {
    let timer;
    return function () {
      clearTimeout(timer);
      timer = setTimeout(() => func(), delay);
    };
  }
  const handleFollowClick = debounce(() => {
    handlefollowBtn();
  }, 300);
```


**해결 방법**: <br>1.클로저 함수를 반환하는 디바운스 함수 구현<br>2.버튼 여러번 클릭시 마지막 클릭이외에 setTimeout의 id값을 clearTimeout를 통해 취소하고 마지막 클릭에만 setTimeout를 통한 콜백함수 호출하게함
</details>

